<div class="container p-3 text-center flex-fill" style="height: 100vh;">
  <h1>Driver List By Department</h1>

  <!-- Form to Select Department and Load Drivers -->
  <div class="table-responsive" style="max-height: 80vh; overflow-y: auto;">
    <form (ngSubmit)="loadDrivers()">
      <select [(ngModel)]="driver.driver_department" name="department" class="form-select">
        <option value="" disabled selected> -- select an option -- </option>
        <option value="Food">Food</option>
        <option value="Furniture">Furniture</option>
        <option value="Electronic">Electronic</option>
      </select>
      <button type="submit" class="btn btn-primary mt-2">Load Drivers</button>
    </form>
    
    <!-- Driver List Table -->
    <div class="container p-3 text-center flex-fill" style="height: 100vh;">
      <div class="table-responsive" style="max-height: 80vh; overflow-y: auto;">
        @if (drivers && drivers.length > 0) {
          <table class="table table-striped table-bordered table-hover">
            <thead>
              <tr>
                <th scope="col" class="text-wrap" style="width: 10%">#</th>
                <th scope="col" class="text-wrap" style="width: 10%">Mongoose ID</th>
                <th scope="col" class="text-wrap" style="width: 10%">Driver ID</th>
                <th scope="col" class="text-wrap" style="width: 10%">Name</th>
                <th scope="col" class="text-wrap" style="width: 10%">Department</th>
                <th scope="col" class="text-wrap" style="width: 10%">License</th>
                <th scope="col" class="text-wrap" style="width: 10%">Is Active</th>
                <th scope="col" class="text-wrap" style="width: 10%">Created At</th>
                <th scope="col" class="text-wrap" style="width: 10%">Actions</th>
              </tr>
            </thead>
            <tbody>
              @for (driver of drivers; track driver; let i = $index) {
              <tr>
                <th scope="row">
                  {{ i + 1 }}
                </th>
                <td class="text-break">
                  {{ driver._id }}
                </td>
                <td class="text-break">
                  {{ driver.driver_id }}
                </td>
                <td class="text-break">
                  {{ driver.driver_name }}
                </td>
                <td class="text-break">
                  {{ driver.driver_department }}
                </td>
                <td class="text-break">
                  {{ driver.driver_license }}
                </td>
                <td class="text-break">
                  {{ driver.driver_is_active ? 'Yes' : 'No' }}
                </td>
                <td class="text-break">
                  {{ driver.created_at }}
                </td>
                <td>
                  <form (ngSubmit)="onDelete(driver.driver_id)">
                    <button class="btn btn-danger" type="submit">Delete</button>
                  </form>
                </td>
              </tr>
              }
            </tbody>
          </table>
        }
        @else {
        <div class="alert alert-info mt-3" role="alert">
          No drivers available for the selected department.
        </div>
        }
      </div>
    </div>
  </div>
</div>
